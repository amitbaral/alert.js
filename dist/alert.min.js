/*!
 * alert.js v0.0.0-alpha, 31.01.2015
 * Beautifully crafted responsive javascript alert boxes.
 * By Ankit Pokhrel (http://ankitpokhrel.com.np/, @ankitpokhrel)
 * Licenced under MIT
 */
!function(a,b){"use strict";var c=function(){var a={type:"alert",title:"",subtitle:"",text:"",buttons:{OK:{label:"Ok",attrs:{id:"btn_ok","class":"alert-js-btn alert-js-btn-ok"}},CANCEL:{label:"Cancel",attrs:{id:"btn_cancel","class":"alert-js-btn alert-js-btn-cancel"}}},overlay:!0,effect:"ease-in",wait:0,from:"middle",success:null,cancelled:null,complete:null},h=function(b){var c=this,d=c.artisan,e=JSON.parse(JSON.stringify(a)),f=g.map(e,b);return d.setOptions(f),"alert"===d.options.type&&(d.options.buttons.CANCEL=!1),d.create("layer"),d.create("header"),d.create("title"),""!==d.options.subtitle&&d.create("subtitle"),d.create("body"),"prompt"===d.options.type&&d.create("input"),d.create("overlay"),b.buttons!==!1&&(d.create("footer"),d.create("okButton"),d.options.buttons.CANCEL!==!1&&d.create("cancelButton")),i(d),d},i=function(a){b.body.appendChild(a.layer),a.layer.appendChild(a.header),a.layer.appendChild(a.body),j(a.header,a.title),j(a.header,a.subtitle),j(a.body,a.input),j(a.layer,a.footer),null!==a.footer&&null!==a.okButton&&(a.footer.appendChild(a.okButton),p(a.okButton,"click",function(){k(!0)})),null!==a.footer&&null!==a.cancelButton&&(a.footer.appendChild(a.cancelButton),p(a.cancelButton,"click",function(){k(!1)})),null===a.input||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||a.input.focus()},j=function(a,b){null!==b&&a.appendChild(b)},k=function(a){var b=r().ref,c=b.artisan.options;b.hide(),a&&null!==c.success?l(b):a||null===c.cancelled||c.cancelled.apply(this),null!==c.complete&&m(b,a)},l=function(a){var b=a.artisan.options;"prompt"===b.type?b.success.call(this,a.artisan.input.value):"#"===b.text.charAt(0)?b.success.call(this,n(a.artisan.layer)):b.success.apply(this)},m=function(a,b){var c=a.artisan.options;"prompt"===c.type?c.complete.call(this,b,a.artisan.input.value):"#"===c.text.charAt(0)?c.complete.call(this,b,n(a.artisan.layer)):c.complete.call(this,b)},n=function(a){var b,c,d=a.querySelectorAll("input, textarea, select"),e={};if(d.length>0)for(b=0;b<d.length;b++)c=d[b].getAttribute("name"),null!==c?e[c]=d[b].value:e[b]=d[b].value;return e},o=function(a){g.wait(),Object.keys(a).length>0&&(a=a.artisan,setTimeout(function(){b.body.insertBefore(a.overlay,a.layer),a.options.overlay||(a.overlay.style.visibility="hidden"),g.addClass(a.layer,"alert-js-"+a.options.effect,function(){setTimeout(function(){g.removeClass(a.layer,"alert-js-animation-"+a.options.from)},10)})},a.options.wait))},p=function(a,b,c){"function"==typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},q=function(){if(!e){var a=r(),b=h.call(a.ref,a.opt);return o(a.ref),b}return!1},r=function(){return d.length<=0?{}:d.slice(0,1).pop()};return{artisan:new f,show:function(a){var b=this;return"undefined"!=typeof a.type&&g.inArray(a.type,g.validTypes())||(a.type="alert"),d.push({ref:new c,opt:a}),this.artisan=q(),b},hide:function(){var a=this,c=a.artisan.layer,e=a.artisan.overlay,f=a.artisan.options;g.addClass(c,"alert-js-animation-"+f.from,function(){d.length>0&&setTimeout(function(){b.body.removeChild(e),b.body.removeChild(c),d.splice(0,1),g.release(),d.length>0&&q()},400)})}}},d=[],e=!1,f=function(){var a=function(){var a=b.createElement("section");return a.setAttribute("id","alertJS"),a.className="alert-js alert-js-animation-"+this.options.from,a},c=function(){var a=b.createElement("header");return a.className="alert-js-header",a},d=function(){var a=b.createElement("h1");return a.innerHTML=this.options.title,a},e=function(){var a=b.createElement("h2");return a.innerHTML=this.options.subtitle,a},f=function(){var a=b.createElement("div");return a.className="alert-js-body",a.innerHTML="#"===this.options.text.charAt(0)?g.pick(this.options.text.slice(1),!0).innerHTML:this.options.text,a},h=function(){var a=b.createElement("input");return a.setAttribute("type","text"),a.className="alert-js-input",a},i=function(){var a=b.createElement("footer");return a.className="alert-js-footer",a},j=function(a){var c=b.createElement("button"),d=this.options.buttons[a];if("object"==typeof d&&g.keyExist("attrs",d))for(var e in d.attrs)"function"!=typeof d.attrs[e]&&d.attrs.hasOwnProperty(e)&&c.setAttribute(e,d.attrs[e]);return c.innerHTML="object"==typeof d&&g.keyExist("label",d)?d.label:"string"==typeof d?d:d.toString(),c},k=function(){return j.call(this,"OK")},l=function(){return j.call(this,"CANCEL")},m=function(){var a=b.createElement("div");return a.className="alert-js-overlay",a};return{layer:null,header:null,title:null,subtitle:null,body:null,input:null,footer:null,buttons:null,okButton:null,cancelButton:null,overlay:null,options:null,customHTML:!1,create:function(b){switch(b){case"layer":return this.layer=a.call(this);case"header":return this.header=c.call(this);case"title":return this.title=d.call(this);case"subtitle":return this.subtitle=e.call(this);case"body":return this.body=f.call(this);case"input":return this.input=h.call(this);case"footer":return this.footer=i.call(this);case"okButton":return this.okButton=k.call(this);case"cancelButton":return this.cancelButton=l.call(this);case"overlay":return this.overlay=m.call(this)}return!1},setOptions:function(a){this.options=a}}},g={pick:function(a,c){return"undefined"==typeof c?b.querySelectorAll(a):b.getElementById(a)},wait:function(){e=!0},release:function(){e=!1},validTypes:function(){return["alert","confirm","prompt"]},inArray:function(a,b){return"object"!=typeof b?!1:b.indexOf(a)>=0},keyExist:function(a,b){return null!==b&&"object"==typeof b?a in b:!1},map:function(a,b){if("undefined"==typeof b)return a;for(var c in b)a.hasOwnProperty(c)&&(g.inArray(typeof b[c],["string","number","function","boolean"])?a[c]="class"===c?a[c]+" "+b[c]:b[c]:"object"!=typeof b[c]||g.inArray(c,["success","cancelled","complete"])||g.map(a[c],b[c]));return a},addClass:function(a,b,c){return a.className+="string"!=typeof b?" "+b.join(" "):" "+b,"function"==typeof c&&c.apply(null),a},removeClass:function(a,b){return a.className=(" "+a.className+" ").replace(" "+b+" "," "),a}};"undefined"==typeof alertjs&&(a.alertjs=new c)}(window,document);